# =================
# Takeuchi Function
# =================
#
# See https://en.wikipedia.org/wiki/Tak_(function)
#
#   tak(x,y,z) = z                                              if x <= y
#   tak(x,y,z) = tak(tak(x-1,y,z), tak(y-1,z,x), tak(z-1,x,y))  otherwise

@prefix math: <http://www.w3.org/2000/10/swap/math#>.
@prefix : <https://eyereasoner.github.io/eye/reasoning#>.

{(?X ?Y ?Z) :tak ?Z} <= {
    ?X math:notGreaterThan ?Y.
}.

{(?X ?Y ?Z) :tak ?A} <= {
    ?X math:greaterThan ?Y.     # guard makes this clause disjoint from the base case
    (?X 1) math:difference ?X1.
    (?X1 ?Y ?Z) :tak ?A1.
    (?Y 1) math:difference ?Y1.
    (?Y1 ?Z ?X) :tak ?A2.
    (?Z 1) math:difference ?Z1.
    (?Z1 ?X ?Y) :tak ?A3.
    (?A1 ?A2 ?A3) :tak ?A.
}.

# test
{(8 4 2) :tak ?A} => {(8 4 2) :takeuchi ?A}.
